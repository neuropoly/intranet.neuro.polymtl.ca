
<!DOCTYPE html>


<html lang="en" data-content_root="../../" data-theme="auto">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Apptainer &#8212; NeuroPoly Internal Wiki  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "auto";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "auto";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/theme.css?v=9a9c6050" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../_static/documentation_options.js?v=c607423c"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'geek-tips/software_containers/apptainer';</script>
    <link rel="icon" href="../../_static/logo.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Various Software &amp; Tools" href="../misc/README.html" />
    <link rel="prev" title="Docker for Deep Learning" href="docker-for-deep-learning.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="auto">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../README.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo.png" class="logo__image only-light" alt=""/>
    <script>document.write(`<img src="../../_static/logo_dark.png" class="logo__image only-dark" alt=""/>`);</script>
  
  
    <p class="title logo__title">NeuroPoly Lab Manual</p>
  
</a></div>
        <div class="sidebar-primary-item"><!-- GTranslate: https://gtranslate.io/ -->
<div class="center-g-translate">
    <a href="#" onclick="doGTranslate('en|en');return false;" title="English" class="gflag nturl" style="background-position:-0px -0px;"><img src="//gtranslate.net/flags/blank.png" height="24" width="24" alt="English" /></a><a href="#" onclick="doGTranslate('en|fr');return false;" title="French" class="gflag nturl" style="background-position:-200px -100px;"><img src="//gtranslate.net/flags/blank.png" height="24" width="24" alt="French" /></a>

    <style type="text/css">
        <!--
        a.gflag {vertical-align:middle;font-size:24px;padding:1px 0;background-repeat:no-repeat;background-image:url(//gtranslate.net/flags/24.png);}
        a.gflag img {border:0;}
        a.gflag:hover {background-image:url(//gtranslate.net/flags/24a.png);}
        #goog-gt-tt {display:none !important;}
        .goog-te-banner-frame {display:none !important;}
        .goog-te-menu-value:hover {text-decoration:none !important;}
        body {top:0 !important;}
        #google_translate_element2 {display:none!important;}
        -->
    </style>

    <div id="google_translate_element2"></div>
    <script type="text/javascript">
        function googleTranslateElementInit2() {new google.translate.TranslateElement({pageLanguage: 'en',autoDisplay: false}, 'google_translate_element2');}
    </script><script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit2"></script>


    <script type="text/javascript">
        /* <![CDATA[ */
        eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('6 7(a,b){n{4(2.9){3 c=2.9("o");c.p(b,f,f);a.q(c)}g{3 c=2.r();a.s(\'t\'+b,c)}}u(e){}}6 h(a){4(a.8)a=a.8;4(a==\'\')v;3 b=a.w(\'|\')[1];3 c;3 d=2.x(\'y\');z(3 i=0;i<d.5;i++)4(d[i].A==\'B-C-D\')c=d[i];4(2.j(\'k\')==E||2.j(\'k\').l.5==0||c.5==0||c.l.5==0){F(6(){h(a)},G)}g{c.8=b;7(c,\'m\');7(c,\'m\')}}',43,43,'||document|var|if|length|function|GTranslateFireEvent|value|createEvent||||||true|else|doGTranslate||getElementById|google_translate_element2|innerHTML|change|try|HTMLEvents|initEvent|dispatchEvent|createEventObject|fireEvent|on|catch|return|split|getElementsByTagName|select|for|className|goog|te|combo|null|setTimeout|500'.split('|'),0,{}))
        /* ]]> */
    </script>
</div></div>
        <div class="sidebar-primary-item">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../onboarding/README.html"><span>ğŸ‘‹</span> Onboarding</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../onboarding/getting-started.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../onboarding/campus-access.html">Campus Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../onboarding/infrastructure.html">Infrastructure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../onboarding/dropbox-google-drive.html">Google Drive</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../onboarding/computer-setup/README.html">Computer Setup</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../onboarding/computer-setup/mail.html"><span>ğŸ“§</span> Email</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../onboarding/computer-setup/slack.html"><span>ğŸ—£</span> Slack</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../onboarding/computer-setup/eduroam.html"><span>ğŸ“¶</span> Eduroam</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../onboarding/computer-setup/shell-profile.html"><span>ğŸ’»</span> Shell Profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../onboarding/computer-setup/configuration-tips.html"><span>ğŸ’¡</span> Other configuration tips</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../../onboarding/software-development.html">Software development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../onboarding/students-interns.html">Students and Interns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../onboarding/consultants-ra.html">Consultants and RA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../onboarding/postdoc.html">Postdoctoral fellows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../onboarding/admin.html">Administrators</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../agenda-and-calendar.html"><span>ğŸ“…</span> Calendar &amp; Meetings</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../computing-resources/README.html"><span>ğŸ–¥</span> Computing Resources</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../computing-resources/neuropoly/README.html"><span>ğŸ–¥</span> Computers @NeuroPoly</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../computing-resources/neuropoly/cpus.html">CPU Clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../computing-resources/neuropoly/gpus.html">GPU Clusters</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../../computing-resources/clusters-at-criugm.html"><span>ğŸ–¥</span> Computers @CRIUGM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../computing-resources/compute-canada.html"><span>ğŸ–¥</span> Compute Canada</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../computing-resources/printer.html"><span>ğŸ–¨</span> Printer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../computing-resources/microsoft365.html"><span>â˜ï¸</span> Microsoft 365</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../computing-resources/youtube.html">YouTube Procedure</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../data/README.html"><span>ğŸ’¾</span> Data</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../data/dataset-curation.html">Dataset curation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../data/git-datasets.html"><code class="docutils literal notranslate"><span class="pre">data.neuro.polymtl.ca</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../data/duke.html"><code class="docutils literal notranslate"><span class="pre">duke</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../data/admin-guide.html">Dataset admin guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../data/deeplearning-models.html">Deep Learning Models</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../mri-scanning/README.html"><span>ğŸ§²</span> MRI Scanning</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../mri-scanning/unf-3t-prisma.html">UNF (3T Prisma)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mri-scanning/mni-mcgill-7t-terra.html">MNI/McGill (7T Terra)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mri-scanning/mhi-7t-agilent.html">MHI (7T Agilent)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mri-scanning/concordia-ge.html">Concordia (3T GE)</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../rf-lab/README.html"><span>ğŸ”§</span> RF Lab</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../rf-lab/mri-coils-at-neuropoly.html">NeuroPoly Coils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rf-lab/misc.html">Misc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rf-lab/mri-phantoms.html">Phantoms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rf-lab/3d-printing/README.html">3D Printing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rf-lab/3d-printing/octoprint.html">OctoPrint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rf-lab/pcb-manufacturing.html">PCB Manufacturing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rf-lab/cnc-machine.html">CNC machine</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Academic Life</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../courses.html"><span>ğŸ“</span> University Courses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../comprehensive-exam-guide.html"><span>ğŸ“–</span> Comprehensive Exam</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scholarships.html"><span>ğŸ’°</span> Scholarships</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../conferences.html"><span>âœˆï¸</span> Conferences</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../bibliography/README.html"><span>ğŸ“š</span> Bibliography</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../bibliography/lab-theses.html">Theses</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bibliography/spinal-cord-injury.html">Spinal Cord Injury</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bibliography/mri.html">MRI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bibliography/mri-analysis.html">MRI Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bibliography/deep-learning.html">Deep Learning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bibliography/histology.html">Histology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bibliography/shared-paperpile-folder.html">Paperpile Folder</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../ideas-for-cool-projects.html"><span>ğŸ’¡</span> Ideas for Cool Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../writing-articles.html"><span>âœï¸</span>     Academic Writing</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Miscellaneous</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../practical-information/README.html"><span>ğŸ“</span> Practical Information</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../practical-information/visa.html"><span>ğŸŒ</span> VISAs and Work Permits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practical-information/medical.html"><span>ğŸ¥</span> Medical</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practical-information/living-in-montreal.html"><span>ğŸ‡¨ğŸ‡¦</span> Living in Montreal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practical-information/purchasing-hardware-and-lab-supplies.html"><span>ğŸ› </span> Purchasing Supplies</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../README.html"><span>ğŸ¤“</span> Geek tips</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../useful-links.html">Useful links/Software</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../bash-shell/README.html">Bash/Shell</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../bash-shell/script.html">Script</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../programming-languages/README.html">Programming Languages</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../programming-languages/python.html">Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../programming-languages/matlab.html">MATLAB</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../programming-languages/c%2B%2B/README.html">C++</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../programming-languages/c%2B%2B/installation-of-vtk-and-itk-on-mac-os-x.html">Installation of VTK and ITK on Mac OS X</a></li>
<li class="toctree-l4"><a class="reference internal" href="../programming-languages/c%2B%2B/using-xcode.html">Using XCode</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../git.html">Git &amp; Github</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git-annex.html">git-annex</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../os-guides/README.html">OS Guides</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../os-guides/linux.html">Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="../os-guides/macosx.html">MacOSX</a></li>
</ul>
</details></li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="README.html">Software Containers</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l3 has-children"><a class="reference internal" href="docker.html">Docker</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="docker-for-deep-learning.html">Docker for Deep Learning</a></li>
</ul>
</details></li>
<li class="toctree-l3 current active"><a class="current reference internal" href="#">Apptainer</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../misc/README.html">Various Software &amp; Tools</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../misc/virtual-machines/README.html">Virtual Machines</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../misc/virtual-machines/virtualbox.html">VirtualBox</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/virtual-machines/vagrant.html">Vagrant</a></li>
</ul>
</details></li>
<li class="toctree-l3"><a class="reference internal" href="../misc/bitbucket.html">BitBucket</a></li>
<li class="toctree-l3"><a class="reference internal" href="../misc/dropbox.html">Dropbox</a></li>
<li class="toctree-l3"><a class="reference internal" href="../misc/jekyll.html">Jekyll</a></li>
<li class="toctree-l3"><a class="reference internal" href="../misc/microsoft-word.html">Microsoft Word</a></li>
<li class="toctree-l3"><a class="reference internal" href="../misc/openneuro.html">OpenNeuro</a></li>
<li class="toctree-l3"><a class="reference internal" href="../misc/sketchup.html">Sketchup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../misc/xquartz.html">XQuartz</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../image-processing-software/README.html">Image Processing Software</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../image-processing-software/advanced-normalization-tools-ants.html">Advanced Normalization Tools (ANTs)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../image-processing-software/anima.html">Anima</a></li>
<li class="toctree-l3"><a class="reference internal" href="../image-processing-software/diffusion-simulator.html">Diffusion Simulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../image-processing-software/freesurfer.html">FreeSurfer</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../image-processing-software/fsl/README.html">FSL</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../image-processing-software/fsl/fsleyes.html">FSLeyes</a></li>
</ul>
</details></li>
<li class="toctree-l3"><a class="reference internal" href="../image-processing-software/itk-snap.html">ITK-SNAP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../image-processing-software/nifti.html">NIfTI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../image-processing-software/openneuro-cli.html">OpenNeuro CLI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../image-processing-software/osirix.html">OsiriX</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../deep-learning/README.html">Deep Learning</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../deep-learning/cuda.html">CUDA</a></li>
<li class="toctree-l3"><a class="reference internal" href="../deep-learning/tensorflow.html">Tensorflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../deep-learning/conditional-random-fields-crf.html">Conditional Random Fields (CRF)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../deep-learning/restricted-boltzmann-machines.html">Restricted Boltzmann Machines (RBM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../deep-learning/misc.html">Misc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../deep-learning/WandB.html">WandB</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../edi.html"><span>ğŸ§©</span> EDI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contact.html"><span>ğŸ“</span> Contact</a></li>
<li class="toctree-l1"><a class="reference external" href="https://neuro.polymtl.ca">NeuroPoly Website</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/neuropoly/intranet.neuro.polymtl.ca/edit/master/geek-tips/software_containers/apptainer.md" target="_blank"
   class="btn btn-sm btn-source-edit-button"
   title="Suggest edit"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>

</a>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Apptainer</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Page Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-the-definition">Creating the Definition</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#header">Header</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sections">Sections</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#arguments"><code class="docutils literal notranslate"><span class="pre">%arguments</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#post"><code class="docutils literal notranslate"><span class="pre">%post</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#runscript-and-startscript"><code class="docutils literal notranslate"><span class="pre">%runscript</span></code> and <code class="docutils literal notranslate"><span class="pre">%startscript</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-an-image">Building an Image</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-a-container">Running a Container</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="apptainer">
<h1>Apptainer<a class="headerlink" href="#apptainer" title="Link to this heading">#</a></h1>
<p>This page serves as a crash-course for a common use case; creating a Apptainer definition, building the corresponding image, and running a containers using it. If you would like a working example, you can look at the implementation used by <a class="reference external" href="https://github.com/spinalcordtoolbox/spinalcordtoolbox/tree/master/contrib/apptainer">Spinal Cord Toolbox</a>.</p>
<p>If you would like further details or specifics, please refer to the <a class="reference external" href="https://apptainer.org/docs/user/latest/">Apptainer Documentation</a>.</p>
<section id="creating-the-definition">
<h2>Creating the Definition<a class="headerlink" href="#creating-the-definition" title="Link to this heading">#</a></h2>
<p>Unlike Docker and Podman, Apptainerâ€™s definition files are split into two parts:</p>
<section id="header">
<h3>Header<a class="headerlink" href="#header" title="Link to this heading">#</a></h3>
<p>This where you define the â€œfoundationâ€ the container should be built on top of. For those familiar with Docker/PodMan, it can be thought as an extended version of the <code class="docutils literal notranslate"><span class="pre">FROM</span></code> command.</p>
<p>For example, the following header will tell Apptainer to download and use a Docker image of Ubuntu 22.04, obtained from <a class="reference external" href="https://hub.docker.com/">Docker Hub</a>, as the base for images generated using the file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># nyan.def</span>
BootStrap:<span class="w"> </span>docker
From:<span class="w"> </span>ubuntu:22.04
...
</pre></div>
</div>
<p>The <strong>BootStrap</strong> value dictates how the other keys in the header will be interpreted; <a class="reference external" href="https://apptainer.org/docs/user/main/appendix.html#build-docker-module"><code class="docutils literal notranslate"><span class="pre">docker</span></code></a> is the most common, but other bootstraps exists. For example, you can use a previously generated image as a starting point with the <a class="reference external" href="https://apptainer.org/docs/user/main/appendix.html#build-localimage"><code class="docutils literal notranslate"><span class="pre">localimage</span></code></a> bootstrap:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># nyan.def</span>
BootStrap:<span class="w"> </span>localimage
From:<span class="w"> </span>/path/to/image/file.sif
...
</pre></div>
</div>
<p>You can read more about the available bootstraps and their use <a class="reference external" href="https://apptainer.org/docs/user/main/definition_files.html#preferred-bootstrap-agents">here</a>.</p>
</section>
<section id="sections">
<h3>Sections<a class="headerlink" href="#sections" title="Link to this heading">#</a></h3>
<p>These are where you define how the image is built, and how containers generated from it should be run. The order of these sections do not matter, though generally you should place sections related to image generation (i.e. <code class="docutils literal notranslate"><span class="pre">%arguments</span></code> and <code class="docutils literal notranslate"><span class="pre">%post</span></code>) above those related to image use (i.e. <code class="docutils literal notranslate"><span class="pre">%runscript</span></code> and <code class="docutils literal notranslate"><span class="pre">%test</span></code>).</p>
<p>Below is a summary of the common sections youâ€™re likely to need in most definitions; for a full list, see the <a class="reference external" href="https://apptainer.org/docs/user/main/definition_files.html#sections">Apptainer Sections</a> documentation.</p>
<section id="arguments">
<h4><code class="docutils literal notranslate"><span class="pre">%arguments</span></code><a class="headerlink" href="#arguments" title="Link to this heading">#</a></h4>
<p>Here you can define command line arguments which can be provided by the user when building an image. They should be in <code class="docutils literal notranslate"><span class="pre">key=value</span></code> form, with <code class="docutils literal notranslate"><span class="pre">value</span></code> being the default value for the associated variable <code class="docutils literal notranslate"><span class="pre">key</span></code>. You must <em>always</em> provide a default value for each, which will be used if the user does not provide the argument themselves:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># nyan.def</span>
<span class="nn">...</span>
<span class="err">%</span><span class="l l-Scalar l-Scalar-Plain">arguments</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">NYAN_URL=&quot;https://raw.githubusercontent.com/fredred375/nyancat_bash/refs/heads/main/nyancat.sh&quot;</span>
<span class="nn">...</span>
</pre></div>
</div>
<p>You can access these arguments in other sections using <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">variable</span> <span class="pre">}}</span></code>, replacing <code class="docutils literal notranslate"><span class="pre">variable</span></code> with the key you specified (i.e. <code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">{{</span> <span class="pre">MODEL_VERSION</span> <span class="pre">}}</span></code>).</p>
</section>
<section id="post">
<h4><code class="docutils literal notranslate"><span class="pre">%post</span></code><a class="headerlink" href="#post" title="Link to this heading">#</a></h4>
<p>When an image is built, this script is run before the image is compiled; it is also the <strong><em>only time during image construction where you can access the internet!!!</em></strong> . As such, this is where you should download any files, install any dependencies, or run any network-dependant scripts/tests. For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># nyan.def</span>
...
%post
<span class="w">  </span><span class="c1"># Install wget</span>
<span class="w">  </span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>wget
<span class="w">  </span>
<span class="w">  </span><span class="c1"># Download nyancat_bash/nyancat.sh off the internet, save it to &#39;nyan.sh&#39;</span>
<span class="w">  </span>wget<span class="w"> </span><span class="o">{{</span><span class="w"> </span>NYAN_URL<span class="w"> </span><span class="o">}}</span><span class="w"> </span>-O<span class="w"> </span>nyan.sh
<span class="w">  </span>
<span class="w">  </span><span class="c1"># Mark &#39;nyan.sh&#39; as a script which has execution permissions</span>
<span class="w">  </span>chmod<span class="w"> </span>+x<span class="w"> </span>nyan.sh
<span class="w">  </span>
<span class="w">  </span><span class="c1"># Link the script to a file in our local path, so we can call it later</span>
<span class="w">  </span>ln<span class="w"> </span>nyan.sh<span class="w"> </span>/usr/local/bin/nyan
...
</pre></div>
</div>
</section>
<section id="runscript-and-startscript">
<h4><code class="docutils literal notranslate"><span class="pre">%runscript</span></code> and <code class="docutils literal notranslate"><span class="pre">%startscript</span></code><a class="headerlink" href="#runscript-and-startscript" title="Link to this heading">#</a></h4>
<p>Both of these sections define a script which be run when a container is created from an image. By default, they are run with <code class="docutils literal notranslate"><span class="pre">bash</span></code>/<code class="docutils literal notranslate"><span class="pre">sh</span></code> (depending on the BootStrap used); you can specify a different</p>
<p>Which of <code class="docutils literal notranslate"><span class="pre">runscript</span></code> or <code class="docutils literal notranslate"><span class="pre">startscript</span></code> is run depends on how the container was created:</p>
<ul class="simple">
<li><p>When the image is called as a <em>script</em> (i.e. <code class="docutils literal notranslate"><span class="pre">./nyan.sif</span></code>), the code within <code class="docutils literal notranslate"><span class="pre">runscript</span></code> is used</p></li>
<li><p>When the image is called as an <em>instance</em> (i.e. <code class="docutils literal notranslate"><span class="pre">apptainer</span> <span class="pre">instance</span> <span class="pre">start</span> <span class="pre">nyan.sif</span></code>), the code within <code class="docutils literal notranslate"><span class="pre">startscript</span></code> is used instead.</p></li>
</ul>
<p>For our purposes, the former is usually preferred over the latter, as the container will self-terminate after the script is completed:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># nyan.def</span>
...
%runscript
<span class="w">  </span><span class="c1"># Call the nyan.sh script we downloaded and linked to in %post</span>
<span class="w">  </span>nyan
...
</pre></div>
</div>
</section>
</section>
</section>
<section id="building-an-image">
<h2>Building an Image<a class="headerlink" href="#building-an-image" title="Link to this heading">#</a></h2>
<p>Once you have a definition file, you can request an image be generated from it using <code class="docutils literal notranslate"><span class="pre">apptainer</span> <span class="pre">build</span> <span class="pre">{image_file}</span> <span class="pre">{definition_file}</span></code>. For example, the following command will generate an Apptainer image <code class="docutils literal notranslate"><span class="pre">nyan.sif</span></code> using the specification provided by the definition file <code class="docutils literal notranslate"><span class="pre">nyan.def</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>apptainer<span class="w"> </span>build<span class="w"> </span>nyan.sif<span class="w"> </span>nyan.def
</pre></div>
</div>
<p>If you use arguments, you can pass their values in using <code class="docutils literal notranslate"><span class="pre">--build-arg</span></code>; this <em>must</em> be specified before the <code class="docutils literal notranslate"><span class="pre">{image_file}</span></code> and <code class="docutils literal notranslate"><span class="pre">{definition_file}</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>apptainer<span class="w"> </span>build<span class="w"> </span>--build-arg<span class="w"> </span><span class="nv">NYAN_URL</span><span class="o">=</span><span class="s2">&quot;https://gist.githubusercontent.com/wting/5278321/raw/327abe259573a59f2e6690972878f976352cbc52/nyan.sh&quot;</span><span class="w"> </span>nyan.sif<span class="w"> </span>nyan.def
</pre></div>
</div>
</section>
<section id="running-a-container">
<h2>Running a Container<a class="headerlink" href="#running-a-container" title="Link to this heading">#</a></h2>
<p>Once you have a built image, in the form of a <code class="docutils literal notranslate"><span class="pre">.sif</span></code> file, you can start creating containers using it! The â€œdefaultâ€ way to do so is to run it as a script; you can do so as if it were any other bash script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./nyan.sif
</pre></div>
</div>
<p>â€¦ or using the <code class="docutils literal notranslate"><span class="pre">apptainer</span> <span class="pre">run</span></code> command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>apptainer<span class="w"> </span>run<span class="w"> </span>nyan.sif
</pre></div>
</div>
<p>If you would like to run a shell using the containerâ€™s environment (allowing you to use the tools provided within itself as through they were called on your own computer), you can instead use <code class="docutils literal notranslate"><span class="pre">apptainer</span> <span class="pre">shell</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>apptainer<span class="w"> </span>shell<span class="w"> </span>nyan.sif
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Now in Apptainer environment</span>
nyan
</pre></div>
</div>
<p>As with any shell, you can terminate the shellâ€™s connection with <code class="docutils literal notranslate"><span class="pre">CTRL</span> <span class="pre">+</span> <span class="pre">D</span></code> and terminate a running process with <code class="docutils literal notranslate"><span class="pre">CTRL</span> <span class="pre">+</span> <span class="pre">C</span></code>.  In either case, if you replicate the file above, and have nyanâ€™d, you should see something like this appear on your terminal:</p>
<p><img alt="&quot;Pop tart cat running across the screen, from left to right, with a rainbow training behind it. Nyan Cat is 14 years old at time of writing...&quot;" src="../../_images/nyan.png" /></p>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="docker-for-deep-learning.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Docker for Deep Learning</p>
      </div>
    </a>
    <a class="right-next"
       href="../misc/README.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Various Software &amp; Tools</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Page Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-the-definition">Creating the Definition</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#header">Header</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sections">Sections</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#arguments"><code class="docutils literal notranslate"><span class="pre">%arguments</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#post"><code class="docutils literal notranslate"><span class="pre">%post</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#runscript-and-startscript"><code class="docutils literal notranslate"><span class="pre">%runscript</span></code> and <code class="docutils literal notranslate"><span class="pre">%startscript</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-an-image">Building an Image</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-a-container">Running a Container</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By NeuroPoly
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      Â© Copyright 2021-2025, NeuroPoly.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>


<!DOCTYPE html>


<html lang="en" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>git-annex &#8212; NeuroPoly Internal Wiki  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/theme.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script src="../_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'geek-tips/git-annex';</script>
    <link rel="icon" href="../_static/logo.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="OS Guides" href="os-guides/README.html" />
    <link rel="prev" title="Git &amp; Github" href="git.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../README.html">
  
  
  
  
    
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
    <p class="title logo__title">NeuroPoly Lab Manual</p>
  
</a></div>
        <div class="sidebar-primary-item"><!-- GTranslate: https://gtranslate.io/ -->
<div class="center-g-translate">
    <a href="#" onclick="doGTranslate('en|en');return false;" title="English" class="gflag nturl" style="background-position:-0px -0px;"><img src="//gtranslate.net/flags/blank.png" height="24" width="24" alt="English" /></a><a href="#" onclick="doGTranslate('en|fr');return false;" title="French" class="gflag nturl" style="background-position:-200px -100px;"><img src="//gtranslate.net/flags/blank.png" height="24" width="24" alt="French" /></a>

    <style type="text/css">
        <!--
        a.gflag {vertical-align:middle;font-size:24px;padding:1px 0;background-repeat:no-repeat;background-image:url(//gtranslate.net/flags/24.png);}
        a.gflag img {border:0;}
        a.gflag:hover {background-image:url(//gtranslate.net/flags/24a.png);}
        #goog-gt-tt {display:none !important;}
        .goog-te-banner-frame {display:none !important;}
        .goog-te-menu-value:hover {text-decoration:none !important;}
        body {top:0 !important;}
        #google_translate_element2 {display:none!important;}
        -->
    </style>

    <div id="google_translate_element2"></div>
    <script type="text/javascript">
        function googleTranslateElementInit2() {new google.translate.TranslateElement({pageLanguage: 'en',autoDisplay: false}, 'google_translate_element2');}
    </script><script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit2"></script>


    <script type="text/javascript">
        /* <![CDATA[ */
        eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('6 7(a,b){n{4(2.9){3 c=2.9("o");c.p(b,f,f);a.q(c)}g{3 c=2.r();a.s(\'t\'+b,c)}}u(e){}}6 h(a){4(a.8)a=a.8;4(a==\'\')v;3 b=a.w(\'|\')[1];3 c;3 d=2.x(\'y\');z(3 i=0;i<d.5;i++)4(d[i].A==\'B-C-D\')c=d[i];4(2.j(\'k\')==E||2.j(\'k\').l.5==0||c.5==0||c.l.5==0){F(6(){h(a)},G)}g{c.8=b;7(c,\'m\');7(c,\'m\')}}',43,43,'||document|var|if|length|function|GTranslateFireEvent|value|createEvent||||||true|else|doGTranslate||getElementById|google_translate_element2|innerHTML|change|try|HTMLEvents|initEvent|dispatchEvent|createEventObject|fireEvent|on|catch|return|split|getElementsByTagName|select|for|className|goog|te|combo|null|setTimeout|500'.split('|'),0,{}))
        /* ]]> */
    </script>
</div></div>
        <div class="sidebar-primary-item">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Ressources</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../onboarding/README.html"><span>üëã</span> Onboarding</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../onboarding/getting-started.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../onboarding/campus-access.html">Campus Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="../onboarding/infrastructure.html">Infrastructure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../onboarding/dropbox-google-drive.html">Google Drive</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../onboarding/computer-setup/README.html">Computer Setup</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../onboarding/computer-setup/mail.html"><span>üìß</span> Email</a></li>
<li class="toctree-l3"><a class="reference internal" href="../onboarding/computer-setup/slack.html"><span>üó£</span> Slack</a></li>
<li class="toctree-l3"><a class="reference internal" href="../onboarding/computer-setup/eduroam.html"><span>üì∂</span> Eduroam</a></li>
<li class="toctree-l3"><a class="reference internal" href="../onboarding/computer-setup/shell-profile.html"><span>üíª</span> Shell Profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="../onboarding/computer-setup/configuration-tips.html"><span>üí°</span> Other configuration tips</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../onboarding/software-development.html">Software development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../onboarding/consultants-ra.html">Consultants and RA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../onboarding/postdoc.html">Postdoctoral fellows</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../agenda-and-calendar.html"><span>üìÖ</span> Calendar &amp; Meetings</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../computing-resources/README.html"><span>üñ•</span> Computing Resources</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../computing-resources/neuropoly/README.html"><span>üñ•</span> Computers @NeuroPoly</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../computing-resources/neuropoly/cpus.html">CPU Clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../computing-resources/neuropoly/gpus.html">GPU Clusters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../computing-resources/clusters-at-criugm.html"><span>üñ•</span> Computers @CRIUGM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../computing-resources/compute-canada.html"><span>üñ•</span> Compute Canada</a></li>
<li class="toctree-l2"><a class="reference internal" href="../computing-resources/printer.html"><span>üñ®</span> Printer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../computing-resources/microsoft365.html"><span>‚òÅÔ∏è</span> Microsoft 365</a></li>
<li class="toctree-l2"><a class="reference internal" href="../computing-resources/youtube.html">YouTube Procedure</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../data/README.html"><span>üíæ</span> Data</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../data/dataset-curation.html">Dataset curation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/git-datasets.html"><code class="docutils literal notranslate"><span class="pre">data</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/duke.html"><code class="docutils literal notranslate"><span class="pre">duke</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/django.html"><code class="docutils literal notranslate"><span class="pre">django</span></code></a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../mri-scanning/README.html"><span>üß≤</span> MRI Scanning</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../mri-scanning/unf-3t-prisma.html">UNF (3T Prisma)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mri-scanning/mni-mcgill-7t-terra.html">MNI/McGill (7T Terra)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mri-scanning/mhi-7t-agilent.html">MHI (7T Agilent)</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../rf-lab/README.html"><span>üîß</span> RF Lab</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../rf-lab/mri-coils-at-neuropoly.html">NeuroPoly Coils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rf-lab/misc.html">Misc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rf-lab/mri-phantoms.html">Phantoms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rf-lab/3d-printing/README.html">3D Printing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rf-lab/3d-printing/octoprint.html">OctoPrint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rf-lab/pcb-manufacturing.html">PCB Manufacturing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rf-lab/cnc-machine.html">CNC machine</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Academic Life</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../courses.html"><span>üéì</span> University Courses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../comprehensive-exam-guide.html"><span>üìñ</span> Comprehensive Exam</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scholarships.html"><span>üí∞</span> Scholarships</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conferences.html"><span>‚úàÔ∏è</span> Conferences</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../bibliography/README.html"><span>üìö</span> Bibliography</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../bibliography/lab-theses.html">Theses</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bibliography/spinal-cord-injury.html">Spinal Cord Injury</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bibliography/mri.html">MRI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bibliography/mri-analysis.html">MRI Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bibliography/deep-learning.html">Deep Learning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bibliography/histology.html">Histology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bibliography/shared-paperpile-folder.html">Paperpile Folder</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ideas-for-cool-projects.html"><span>üí°</span> Ideas for Cool Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../writing-articles.html"><span>‚úçÔ∏è</span>     Academic Writing</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Miscellaneous</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../practical-information/README.html"><span>üìé</span> Practical Information</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../practical-information/visa.html"><span>üåé</span> VISAs and Work Permits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practical-information/medical.html"><span>üè•</span> Medical</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practical-information/living-in-montreal.html"><span>üá®üá¶</span> Living in Montreal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practical-information/purchasing-hardware-and-lab-supplies.html"><span>üõ†</span> Purchasing Supplies</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="README.html"><span>ü§ì</span> Geek tips</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="useful-links.html">Useful links/Software</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="bash-shell/README.html">Bash/Shell</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="bash-shell/script.html">Script</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="programming-languages/README.html">Programming Languages</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-12"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="programming-languages/python.html">Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="programming-languages/matlab.html">MATLAB</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="programming-languages/c%2B%2B/README.html">C++</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-13"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="programming-languages/c%2B%2B/installation-of-vtk-and-itk-on-mac-os-x.html">Installation of VTK and ITK on Mac OS X</a></li>
<li class="toctree-l4"><a class="reference internal" href="programming-languages/c%2B%2B/using-xcode.html">Using XCode</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="git.html">Git &amp; Github</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">git-annex</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="os-guides/README.html">OS Guides</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-14"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="os-guides/linux.html">Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="os-guides/macosx.html">MacOSX</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="misc/README.html">Various Software &amp; Tools</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-15"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="misc/virtual-machines/README.html">Virtual Machines</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-16"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="misc/virtual-machines/virtualbox.html">VirtualBox</a></li>
<li class="toctree-l4"><a class="reference internal" href="misc/virtual-machines/vagrant.html">Vagrant</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="misc/bitbucket.html">BitBucket</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="misc/docker/README.html">Docker</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-17"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="misc/docker/docker-for-deep-learning.html">Docker for Deep Learning</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="misc/dropbox.html">Dropbox</a></li>
<li class="toctree-l3"><a class="reference internal" href="misc/jekyll.html">Jekyll</a></li>
<li class="toctree-l3"><a class="reference internal" href="misc/microsoft-word.html">Microsoft Word</a></li>
<li class="toctree-l3"><a class="reference internal" href="misc/openneuro.html">OpenNeuro</a></li>
<li class="toctree-l3"><a class="reference internal" href="misc/sketchup.html">Sketchup</a></li>
<li class="toctree-l3"><a class="reference internal" href="misc/xquartz.html">XQuartz</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="image-processing-software/README.html">Image Processing Software</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-18"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="image-processing-software/advanced-normalization-tools-ants.html">Advanced Normalization Tools (ANTs)</a></li>
<li class="toctree-l3"><a class="reference internal" href="image-processing-software/anima.html">Anima</a></li>
<li class="toctree-l3"><a class="reference internal" href="image-processing-software/diffusion-simulator.html">Diffusion Simulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="image-processing-software/freesurfer.html">FreeSurfer</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="image-processing-software/fsl/README.html">FSL</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-19"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="image-processing-software/fsl/fsleyes.html">FSLeyes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="image-processing-software/itk-snap.html">ITK-SNAP</a></li>
<li class="toctree-l3"><a class="reference internal" href="image-processing-software/nifti.html">NIfTI</a></li>
<li class="toctree-l3"><a class="reference internal" href="image-processing-software/openneuro-cli.html">OpenNeuro CLI</a></li>
<li class="toctree-l3"><a class="reference internal" href="image-processing-software/osirix.html">OsiriX</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="deep-learning/README.html">Deep Learning</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-20"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="deep-learning/cuda.html">CUDA</a></li>
<li class="toctree-l3"><a class="reference internal" href="deep-learning/tensorflow.html">Tensorflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="deep-learning/conditional-random-fields-crf.html">Conditional Random Fields (CRF)</a></li>
<li class="toctree-l3"><a class="reference internal" href="deep-learning/restricted-boltzmann-machines.html">Restricted Boltzmann Machines (RBM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="deep-learning/misc.html">Misc</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../edi.html"><span>üß©</span> EDI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contact.html"><span>üìû</span> Contact</a></li>
<li class="toctree-l1"><a class="reference external" href="https://neuro.polymtl.ca">NeuroPoly Website</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/neuropoly/intranet.neuro.polymtl.ca/edit/master/geek-tips/git-annex.md" target="_blank"
   class="btn btn-sm btn-source-edit-button"
   title="Suggest edit"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>

</a>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>git-annex</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Page Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installation">Installation</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#global-git-config">Global <code class="docutils literal notranslate"><span class="pre">git</span></code> config</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#new-repo">New repo</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#annex-thin-hardlinks"><code class="docutils literal notranslate"><span class="pre">annex.thin</span></code> Hardlinks <a id="hardlinks"></a></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#troubleshooting">Troubleshooting</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#version-problems">version problems</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#checking-annex-file-locations">checking annex file locations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-cosmetic-problem-affecting-git-status">‚Äúa cosmetic problem affecting git status‚Äù</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#resetting">Resetting</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#rm-cannot-remove"><code class="docutils literal notranslate"><span class="pre">rm:</span> <span class="pre">cannot</span> <span class="pre">remove</span></code></a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="git-annex">
<h1>git-annex<a class="headerlink" href="#git-annex" title="Permalink to this heading">#</a></h1>
<p><a class="reference external" href="https://git-annex.branchable.com/"><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">annex</span></code></a> is an extension to git that lets it handle large repos spread in pieces across multiple servers/disks/accounts.</p>
<p>We are using it because</p>
<ol class="arabic simple">
<li><p>We have datasets we need to trace but they are too large for plain git to handle them well</p></li>
<li><p>It is compatible with <a class="reference external" href="https://datalad.org"><code class="docutils literal notranslate"><span class="pre">datalad</span></code></a> which gaining popularity in the neuroimaging community</p></li>
</ol>
<p>It has about a thousand variants and options. This covers only the parts we use.</p>
<p><code class="docutils literal notranslate"><span class="pre">git-annex</span></code> brings with it all the power of <code class="docutils literal notranslate"><span class="pre">git</span></code>. You should be somewhat familiar with branches, tags,. Please read <a class="reference external" href="https://git-scm.com/book/en/v2">the git book</a>. The <a class="reference external" href="https://handbook.datalad.org/">datalad handbook</a> also has useful perspective, though not all of it is relevant to how we do things.</p>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">#</a></h2>
<p>You must have a unix OS. <code class="docutils literal notranslate"><span class="pre">git-annex</span></code> is simply not compatible with anything else.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-0">
Linux</label><div class="sd-tab-content docutils">
<ul class="simple">
<li><p><strong>Arch</strong>: <code class="docutils literal notranslate"><span class="pre">pacman</span> <span class="pre">-Sy</span> <span class="pre">git-annex</span></code></p></li>
<li><p><strong>Fedora/RedHat/CentOS</strong>: <code class="docutils literal notranslate"><span class="pre">dnf</span> <span class="pre">install</span> <span class="pre">git-annex</span></code></p></li>
<li><p><strong>Debian/Ubuntu</strong>: <code class="docutils literal notranslate"><span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">git-annex</span></code></p></li>
<li><p><strong><a class="reference external" href="https://docs.computecanada.ca/">ComputeCanada</a></strong>, a supercomputer we have accounts on: <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">load</span> <span class="pre">StdEnv/2020</span>&#160; <span class="pre">&amp;&amp;</span> <span class="pre">module</span> <span class="pre">load</span> <span class="pre">git-annex</span></code> <em>in <a class="reference external" href="https://docs.alliancecan.ca/wiki/Utiliser_des_modules/en#Loading_modules_automatically">every session or batch job</a></em></p></li>
<li><p>if on an older system and can‚Äôt upgrade, you can try <a class="reference external" href="https://docs.conda.io/en/latest/miniconda.html">installing <code class="docutils literal notranslate"><span class="pre">conda</span></code></a> (or <a class="reference external" href="https://github.com/conda-forge/miniforge/#miniforge3">miniforge</a> or <a class="reference external" href="https://github.com/conda-forge/miniforge/#mambaforge">mambaforge</a>) and then using <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">-f</span> <span class="pre">conda-forge</span> <span class="pre">git-annex</span></code> (or `mamba install -f conda-forge git-annex).</p></li>
</ul>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-1">
macOS</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">brew</span> <span class="n">install</span> <span class="n">git</span><span class="o">-</span><span class="n">annex</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-2" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-2">
Windows 10 (via WSL)</label><div class="sd-tab-content docutils">
<p>Install <a class="reference external" href="https://docs.microsoft.com/en-us/windows/wsl/install-win10">WSL</a>, pick a distro, and then run one of:</p>
<ul class="simple">
<li><p><strong><a class="reference external" href="https://www.microsoft.com/store/apps/9n6svws3rx71">Ubuntu-20.04</a></strong>: <code class="docutils literal notranslate"><span class="pre">apt</span> <span class="pre">install</span> <span class="pre">git-annex</span></code></p></li>
<li><p><strong><a class="reference external" href="https://www.microsoft.com/store/apps/9MSVKQC78PK6">Debian</a></strong>: <code class="docutils literal notranslate"><span class="pre">apt</span> <span class="pre">install</span> <span class="pre">git-annex</span></code></p></li>
<li><p>The <a class="reference external" href="https://docs.microsoft.com/en-us/windows/wsl/install-manual#downloading-distributions">other distros</a> are supported.</p></li>
</ul>
</div>
<input id="sd-tab-item-3" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-3">
Windows 10 (via VirtualBox)</label><div class="sd-tab-content docutils">
<p>Install <a class="reference external" href="https://virtualbox.org/">VirtualBox</a>, install a Linux distro inside of it, and then follow the Linux instructions.</p>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Check that <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">annex</span> <span class="pre">version</span></code> reports <strong>version 8</strong> or higher! It should look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git annex version
git-annex version: 8.20210310-ga343ea76c8
build flags: Assistant Webapp Pairing Inotify DBus DesktopNotify TorrentParser MagicMime Feeds Testsuite S3 WebDAV
dependency versions: aws-0.22 bloomfilter-2.0.1.0 cryptonite-0.28 DAV-1.3.4 feed-1.3.2.0 ghc-8.10.4 http-client-0.7.6 persistent-sqlite-2.11.1.0 torrent-10000.1.1 uuid-1.3.14 yesod-1.6.1.0
key/value backends: SHA256E SHA256 SHA512E SHA512 SHA224E SHA224 SHA384E SHA384 SHA3_256E SHA3_256 SHA3_512E SHA3_512 SHA3_224E SHA3_224 SHA3_384E SHA3_384 SKEIN256E SKEIN256 SKEIN512E SKEIN512 BLAKE2B256E BLAKE2B256 BLAKE2B512E BLAKE2B512 BLAKE2B160E BLAKE2B160 BLAKE2B224E BLAKE2B224 BLAKE2B384E BLAKE2B384 BLAKE2BP512E BLAKE2BP512 BLAKE2S256E BLAKE2S256 BLAKE2S160E BLAKE2S160 BLAKE2S224E BLAKE2S224 BLAKE2SP256E BLAKE2SP256 BLAKE2SP224E BLAKE2SP224 SHA1E SHA1 MD5E MD5 WORM URL X*
remote types: git gcrypt p2p S3 bup directory rsync web bittorrent webdav adb tahoe glacier ddar git-lfs httpalso borg hook external
operating system: linux x86_64
supported repository versions: 8
upgrade supported from repository versions: 0 1 2 3 4 5 6 7
</pre></div>
</div>
</div>
<section id="global-git-config">
<h3>Global <code class="docutils literal notranslate"><span class="pre">git</span></code> config<a class="headerlink" href="#global-git-config" title="Permalink to this heading">#</a></h3>
<p>For smooth operation, everyone should do on all of their machines:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="k">global</span> <span class="n">push</span><span class="o">.</span><span class="n">default</span> <span class="n">current</span>
</pre></div>
</div>
<p>And specifically for <code class="docutils literal notranslate"><span class="pre">git-annex</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="k">global</span> <span class="n">annex</span><span class="o">.</span><span class="n">thin</span> <span class="n">true</span> <span class="c1"># save disk space by de-duplicating checked out and annexed copies</span>
<span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="k">global</span> <span class="n">annex</span><span class="o">.</span><span class="n">private</span> <span class="n">true</span> <span class="c1"># prevent attempting to share your local copy of the annex, which is impossible when working in a team</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="#annexthin-hardlinks"><span class="xref myst">below</span></a> to understand what this setting offers.</p>
</section>
</section>
<section id="new-repo">
<h2>New repo<a class="headerlink" href="#new-repo" title="Permalink to this heading">#</a></h2>
<p>Use this recipe to make new datasets:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">my</span><span class="o">-</span><span class="n">new</span><span class="o">-</span><span class="n">repo</span>
<span class="n">cd</span> <span class="n">my</span><span class="o">-</span><span class="n">new</span><span class="o">-</span><span class="n">repo</span>

<span class="n">git</span> <span class="n">init</span>
<span class="n">vi</span> <span class="n">README</span>
<span class="c1"># write something useful in README</span>
<span class="n">git</span> <span class="n">add</span> <span class="n">README</span> <span class="o">&amp;&amp;</span> <span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;Initial commit&quot;</span>

<span class="n">cat</span> <span class="o">&lt;&lt;</span><span class="n">EOF</span> <span class="o">&gt;</span> <span class="o">.</span><span class="n">gitignore</span>
<span class="o">.</span><span class="n">DS_Store</span>
<span class="n">EOF</span>

<span class="n">cat</span> <span class="o">&lt;&lt;</span><span class="n">EOF</span> <span class="o">&gt;</span> <span class="o">.</span><span class="n">gitattributes</span>
<span class="c1"># Normalize line-endings to \n</span>
<span class="o">*</span>             <span class="n">text</span><span class="o">=</span><span class="n">auto</span>

<span class="c1"># Configure filetypes stored by git-annex.</span>
<span class="c1"># by default git-annex sets * filter=annex, but that is very slow:</span>
<span class="c1"># it copies even non-annexed files through git-annex even though it will decide not to handle them.</span>
<span class="c1"># this overrides that behaviour so that only annexed files must be processed.</span>
<span class="o">*</span>             <span class="n">annex</span><span class="o">.</span><span class="n">largefiles</span><span class="o">=</span><span class="n">nothing</span>
<span class="o">*.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span>      <span class="nb">filter</span><span class="o">=</span><span class="n">annex</span> <span class="n">annex</span><span class="o">.</span><span class="n">largefiles</span><span class="o">=</span><span class="n">anything</span>
<span class="o">*.</span><span class="n">nii</span>         <span class="nb">filter</span><span class="o">=</span><span class="n">annex</span> <span class="n">annex</span><span class="o">.</span><span class="n">largefiles</span><span class="o">=</span><span class="n">anything</span>
<span class="o">*.</span><span class="n">tif</span>         <span class="nb">filter</span><span class="o">=</span><span class="n">annex</span> <span class="n">annex</span><span class="o">.</span><span class="n">largefiles</span><span class="o">=</span><span class="n">anything</span>
<span class="n">EOF</span>

<span class="n">git</span> <span class="n">add</span> <span class="o">.</span><span class="n">gitignore</span> <span class="o">.</span><span class="n">gitattributes</span> <span class="o">&amp;&amp;</span> <span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;Configure git-annex&quot;</span>

<span class="n">git</span> <span class="n">annex</span> <span class="n">init</span>
<span class="c1"># .gitattributes runs the filter on &#39;git add&#39;, which leaves files &#39;unlocked&#39;; i.e. as themselves, instead of as symlinks into .git/annex/objects; this setting ensures files added with &#39;git annex add&#39; are also &#39;unlocked&#39;.</span>
<span class="n">git</span> <span class="n">annex</span> <span class="n">config</span> <span class="o">--</span><span class="nb">set</span> <span class="n">annex</span><span class="o">.</span><span class="n">addunlocked</span> <span class="n">true</span> 
                                        
<span class="c1"># Here, copy in or create initial files, wherever they are from:</span>
<span class="c1"># rsync, wget, curl, tar, dropbox, etc &lt;...&gt;, then run the following commands.</span>

<span class="n">git</span> <span class="n">add</span> <span class="o">.</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;Initial data&quot;</span>
</pre></div>
</div>
<p>If you are working on a private, internal dataset, continue by <a class="reference internal" href="../data/git-datasets.html#new-repository"><span class="std std-ref">uploading to <code class="docutils literal notranslate"><span class="pre">data.neuro.polymtl.ca</span></code></span></a>.</p>
</section>
<section id="annex-thin-hardlinks">
<h2><code class="docutils literal notranslate"><span class="pre">annex.thin</span></code> Hardlinks <a id="hardlinks"><a class="headerlink" href="#annex-thin-hardlinks" title="Permalink to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">annex.thin</span></code> saves a lot of space by deduplicating file content via <a class="reference external" href="https://wiki.debian.org/ln">hard links</a>:
the files your checkout <code class="docutils literal notranslate"><span class="pre">repo/</span></code> will be physically the same content as their sources in <code class="docutils literal notranslate"><span class="pre">repo/.git/annex/objects/</span></code>, instead of copies.</p>
<p>To confirm this is working, you can compare the size of the content with the annex.
They should be roughly the same size, <strong>even though one is contained in the other</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>~/datasets/uk-biobank-processed$ du -hs uk-biobank-processed/
81G	uk-biobank-processed/
nguenther@data:~/datasets/uk-biobank-processed$ du -hs uk-biobank-processed/.git/annex/
81G	uk-biobank-processed/.git/annex/
</pre></div>
</div>
<p>You can confirm it another way by looking at the link count on a file, e.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ stat derivatives/labels/sub-1140317/anat/sub-1140317_T1w_seg-manual.nii.gz
   File: derivatives/labels/sub-1140317/anat/sub-1140317_T1w_seg-manual.nii.gz
   Size: 28305     	Blocks: 56         IO Block: 4096   regular file
 Device: 802h/2050d	Inode: 1319996     Links: 2
 Access: (0644/-rw-r--r--)  Uid: ( 1001/zamboni)   Gid: ( 1001/zamboni)
 Access: 2021-06-28 17:19:15.321874946 -0400
 Modify: 2021-06-28 16:00:45.261893952 -0400
 Change: 2021-06-28 17:19:15.161873978 -0400
  Birth: 2021-06-28 16:00:45.261893952 -0400
</pre></div>
</div>
<p>(macOS uses a different format for <code class="docutils literal notranslate"><span class="pre">stat(1)</span></code>, but all the same information is there)</p>
<p>This shows that the link count is 2, which should be the case for ‚Äúthinly‚Äù annexed files (unless they are duplicated elsewhere in the dataset, in which case the link count could be 3, 4, or higher).</p>
<p>You can find where such a file is in the annex by searching for its inode number:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ find . -inum 1319996
 ./derivatives/labels/sub-1140317/anat/sub-1140317_T1w_seg-manual.nii.gz
 ./.git/annex/objects/6V/X3/SHA256E-s28305--3f309650bbc2d5146d9e1d1e24c7b17ee82c9da2fb609030ee83f3c1f2d74acb.nii.gz/SHA256E-s28305--3f309650bbc2d5146d9e1d1e24c7b17ee82c9da2fb609030ee83f3c1f2d74acb.nii.gz
</pre></div>
</div>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this heading">#</a></h2>
<section id="version-problems">
<h3>version problems<a class="headerlink" href="#version-problems" title="Permalink to this heading">#</a></h3>
<p>If you have any error at all, the first thing to check is that you have <code class="docutils literal notranslate"><span class="pre">git-annex</span></code> version 8, <a class="reference internal" href="#installation">as explained above</a>.</p>
</section>
<section id="checking-annex-file-locations">
<h3>checking annex file locations<a class="headerlink" href="#checking-annex-file-locations" title="Permalink to this heading">#</a></h3>
<p>The content of annexed files that have been downloaded locally is stored under <code class="docutils literal notranslate"><span class="pre">repo/.git/annex/objects/</span></code>. You can find which specific file corresponds to by using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">show</span></code> or <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span> <span class="pre">-p</span></code> to see the content that <code class="docutils literal notranslate"><span class="pre">git</span></code> has recorded for the file ‚Äì which will be a string giving the ‚Äúannex pointer‚Äù:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git show HEAD:derivatives/labels/sub-1140317/anat/sub-1140317_T1w_seg-manual.nii.gz
/annex/objects/SHA256E-s28305--3f309650bbc2d5146d9e1d1e24c7b17ee82c9da2fb609030ee83f3c1f2d74acb.nii.gz
</pre></div>
</div>
<p>and then locating a file with this name in <code class="docutils literal notranslate"><span class="pre">.git/annex/objects/</span></code>; however, it is not as simple as just combining the two together, git-annex prepends extra filenames, so you need to use <code class="docutils literal notranslate"><span class="pre">find(1)</span></code> to locate the file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ find .git/annex/objects/ -name &quot;SHA256E-s28305--3f309650bbc2d5146d9e1d1e24c7b17ee82c9da2fb609030ee83f3c1f2d74acb.nii.gz&quot;
.git/annex/objects/6V/X3/SHA256E-s28305--3f309650bbc2d5146d9e1d1e24c7b17ee82c9da2fb609030ee83f3c1f2d74acb.nii.gz
.git/annex/objects/6V/X3/SHA256E-s28305--3f309650bbc2d5146d9e1d1e24c7b17ee82c9da2fb609030ee83f3c1f2d74acb.nii.gz/SHA256E-s28305--3f309650bbc2d5146d9e1d1e24c7b17ee82c9da2fb609030ee83f3c1f2d74acb.nii.gz
</pre></div>
</div>
</section>
<section id="a-cosmetic-problem-affecting-git-status">
<h3>‚Äúa cosmetic problem affecting git status‚Äù<a class="headerlink" href="#a-cosmetic-problem-affecting-git-status" title="Permalink to this heading">#</a></h3>
<p>Sometimes the <code class="docutils literal notranslate"><span class="pre">git-annex</span></code> filter will glitch, particularly during long uploads or downloads.
It will usually ‚Äì but not always ‚Äì give you a warning in these cases saying ‚Äúa cosmetic problem affecting git status‚Äù.
Despite the innocuous sounded warning, this glitch prevents git operating.
A symptom of this glitch is that <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code> reports many, many ‚Äúmodified‚Äù files that shouldn‚Äôt be.</p>
<p>The fix is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">status</span> <span class="o">|</span> <span class="n">sed</span> <span class="o">-</span><span class="n">n</span> <span class="s1">&#39;s/modified://p&#39;</span> <span class="o">|</span> <span class="n">xargs</span> <span class="n">git</span> <span class="n">update</span><span class="o">-</span><span class="n">index</span> <span class="o">-</span><span class="n">q</span> <span class="o">--</span><span class="n">refresh</span>
</pre></div>
</div>
<p>This doesn‚Äôt touch file contents, so it should be safe to run anytime.</p>
<p>The issue is that git-annex v8 uses a filter to expand the small pointers committed to git to full files and vice versa, and if interrupted while doing its work, it can leave files with full annexed contents that do not match the annex pointers git is expecting to see. <code class="docutils literal notranslate"><span class="pre">update-index</span></code> gives git a kickstart to fix it.</p>
</section>
<section id="resetting">
<h3>Resetting<a class="headerlink" href="#resetting" title="Permalink to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">git-annex</span> <span class="pre">init</span></code> writes to a lot of places: the <code class="docutils literal notranslate"><span class="pre">git-annex</span></code> branch,
<code class="docutils literal notranslate"><span class="pre">.git/annex</span></code> (including several sqlite databases?), <code class="docutils literal notranslate"><span class="pre">.git</span></code>/config,
and, sometimes, <code class="docutils literal notranslate"><span class="pre">.git/info/attributes</span></code>.</p>
<p>To get rid of it without getting rid of the
complete repo, you can use</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">annex</span> <span class="n">uninit</span>
</pre></div>
</div>
<p>To reset just the ID of the current copy, to make it appear like a fresh repo to <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">annex</span> <span class="pre">whereis</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="n">unset</span> <span class="n">annex</span><span class="o">.</span><span class="n">uuid</span>
<span class="c1">#  then git annex init again? or what?</span>
</pre></div>
</div>
</section>
<section id="rm-cannot-remove">
<h3><code class="docutils literal notranslate"><span class="pre">rm:</span> <span class="pre">cannot</span> <span class="pre">remove</span></code><a class="headerlink" href="#rm-cannot-remove" title="Permalink to this heading">#</a></h3>
<p>When trying to get rid of a git-annex dataset, you will run into, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ rm -rf data-single-subject/
[...]
rm: cannot remove &#39;data-single-subject/.git/annex/objects/mF/GV/SHA256E-s1082687--290a43b80da6f608e3d47107f3b6c05e98eebe56ed4eea633748c08bd1a7837a.nii.gz/SHA256E-s1082687--290a43b80da6f608e3d47107f3b6c05e98eebe56ed4eea633748c08bd1a7837a.nii.gz&#39;: Permission denied
rm: cannot remove &#39;data-single-subject/.git/annex/objects/Vq/vF/SHA256E-s15564390--7d3e45f0d4c67f31883b76eafc6cfdca1c1591590e2243dc8d443b07616b3609.nii.gz/SHA256E-s15564390--7d3e45f0d4c67f31883b76eafc6cfdca1c1591590e2243dc8d443b07616b3609.nii.gz&#39;: Permission denied
rm: cannot remove &#39;data-single-subject/.git/annex/objects/79/G6/SHA256E-s7183853--3262ac5d6c5f573720c5e508da47608bd9fa49d6cd4dd547f75046c1a2f0d5b6.nii.gz/SHA256E-s7183853--3262ac5d6c5f573720c5e508da47608bd9fa49d6cd4dd547f75046c1a2f0d5b6.nii.gz&#39;: Permission denied
</pre></div>
</div>
<p>This is because git-annex <a class="reference external" href="https://git-annex.branchable.com/internals/lockdown/">tries extra hard</a> to make it hard to lose data, by marking its contents read-only. If you really intend to erase the dataset you need to open the permissions first with <code class="docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">-R</span> <span class="pre">+w</span></code>, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ chmod -R +w data-single-subject/.git/annex/
$ rm -rf data-single-subject/
</pre></div>
</div>
</section>
</section>
</section>


                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="git.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Git &amp; Github</p>
      </div>
    </a>
    <a class="right-next"
       href="os-guides/README.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">OS Guides</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Page Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installation">Installation</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#global-git-config">Global <code class="docutils literal notranslate"><span class="pre">git</span></code> config</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#new-repo">New repo</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#annex-thin-hardlinks"><code class="docutils literal notranslate"><span class="pre">annex.thin</span></code> Hardlinks <a id="hardlinks"></a></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#troubleshooting">Troubleshooting</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#version-problems">version problems</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#checking-annex-file-locations">checking annex file locations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-cosmetic-problem-affecting-git-status">‚Äúa cosmetic problem affecting git status‚Äù</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#resetting">Resetting</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#rm-cannot-remove"><code class="docutils literal notranslate"><span class="pre">rm:</span> <span class="pre">cannot</span> <span class="pre">remove</span></code></a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By NeuroPoly
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      ¬© Copyright 2021, NeuroPoly.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>